#LyX 2.1 created this file. For more info see http://www.lyx.org/
\lyxformat 474
\begin_document
\begin_header
\textclass ociamthesis-lyx
\begin_preamble
\usepackage{listings}
\end_preamble
\options a4paper,titlepage
\use_default_options false
\maintain_unincluded_children false
\language spanish
\language_package default
\inputencoding auto
\fontencoding global
\font_roman default
\font_sans default
\font_typewriter default
\font_math auto
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize 12
\spacing onehalf
\use_hyperref false
\papersize default
\use_geometry false
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 0
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine natbib
\cite_engine_type numerical
\biblio_style plainnat
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 0
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle fancy
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Chapter
Evaluación de las técnicas de predicción
\begin_inset CommandInset label
LatexCommand label
name "chap:Evaluación"

\end_inset


\end_layout

\begin_layout Standard
En este capítulo se procede a la evaluación de las técnicas de predicción
 implementadas.
 Las evaluaciones se realiza sobre un entorno experimental.
 En primer lugar se define el entorno empleado para la realización de las
 pruebas, los equipos utilizados y su conexión y los programas utilizados
 para simular las pruebas.
 A continuación se expondrá en que consiste cada prueba.
 Para cada prueba se indicará las modificaciones realizadas al escenario
 original y a continuación se mostrarán los resultados obtenidos.
 
\end_layout

\begin_layout Section
Introducción
\end_layout

\begin_layout Standard
Las técnicas de predicción de movimiento permite mitigar problemas existen
 en las simulaciones distribuidas como son los videojuegos en este caso.
 Los problemas principalmente son tres.
 El primero suavizar el movimiento de las entidades remotas para que tengan
 un movimiento continuo como las entidades que se mueven localmente.
 El segundo sería conseguir que el movimiento que tiene la entidad local
 con respecto a su réplicas sea similar, es decir el error de posición entre
 los movimientos sea pequeño.
 Y por último reducir el efecto adverso que causan las pérdidas de la red
 prediciendo el movimiento durante un pequeño intervalo de tiempo.
 Por ello se realizarán tres evalucaciones.
 En la primera de ellas se evaluará la fluidez de los movimientos.
 Posteriormente se hará un estudio respecto a la tasa de actualización,
 para la cual se calculará el error de posición.
 Y en la última evaluación se realizará el mismo estudio pero respecto a
 la tasa de pérdidas en la red.
 
\end_layout

\begin_layout Section
Descripción del entorno experimental
\begin_inset CommandInset label
LatexCommand label
name "sec:Descripción-del-entorno-experimental"

\end_inset


\end_layout

\begin_layout Standard
El entorno es una red formada por dos ordenadores y un enrutador, Fig.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:EsquemaRed"

\end_inset

.
 El primer ordenador se trata de un portátil cuyas especificaciones técnicas
 se muestran en la Tab.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:CaracterísticasOrdenadores"

\end_inset

.
 Este ordenador será el que acoja la partida por lo que actuará tanto de
 cliente como servidor.
 Además hará uso de una herramienta para simulación de redes denominada
 
\shape italic
Network Link Conditioner
\shape default
.
 Se trata de una utilidad que forma parte de un paquete para el programa
 Xcode 
\begin_inset CommandInset citation
LatexCommand citep
key "Xcode"

\end_inset

, que permite simular con precisión y coherencia entornos de red adversos.
 Para caracterizar las diferentes redes permite definir la probabilidad
 de error, retardo y ancho de banda tanto para el enlace de subida y bajada
 para el interfaz de red.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
centering
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename ../figures/EsquemaRed.png
	width 75text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Entorno de experimentación
\begin_inset CommandInset label
LatexCommand label
name "fig:EsquemaRed"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
centering
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="3">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top" width="4cm">
<column alignment="center" valignment="top" width="5cm">
<column alignment="center" valignment="top" width="5cm">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Ordenador
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Cliente/Servidor (Portatil)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Cliente (Torre)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Procesador
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2.8GHz IntelCore 7 
\end_layout

\begin_layout Plain Layout
Doble Núcleo
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
3.20GHz IntelCore 5 
\end_layout

\begin_layout Plain Layout
Cuatro Núcleos
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Memoria
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
8GB 1333MHz DDR3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
4GB 1333MHz DDR3
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Tarjeta Gráfica
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Intel HD 3000 512MB
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Nvidia GeForce GT 320
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Sistema Operativo
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
OS X Yosemite 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Windows 7 
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Caption Standard

\begin_layout Plain Layout
Características de los ordenadores
\begin_inset CommandInset label
LatexCommand label
name "tab:CaracterísticasOrdenadores"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
El segundo ordenador es un ordenador fijo de sobremesa, y actuará solamente
 como cliente.
 El ordenador fijo es bastante más potente tanto en el procesador como en
 la gráfica.
 En la Tab.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:CaracterísticasOrdenadores"

\end_inset

 se pueden ver sus características.
 Esta diferencia de potencia provoca que en el ordenador fijo se ejecute
 el juego a más fotogramas por segundo.
 
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
La conexión que los equipos han utilizado para conectarse al enrutador (que
 también actua como conmutador) ha sido cableada mediante cables RJ45 a
 100Mbps.
 Se ha optado por una conexión cableada para que el entorno sea lo más propicio
 posible, eliminando todas las interferencias y problemas que pueda conllevar
 una conexión inalámbrica.
 De este modo las distintas evaluaciones no estáran en principio influenciadas
 por el tipo de conexión.
\end_layout

\begin_layout Subsection
Recogida de datos 
\end_layout

\begin_layout Standard
Para las evaluaciones es necesario comparar las posiciones del personaje
 en los dos equipos.
 Se busca comparar el movimiento que sigue el personaje remoto y determinar
 cuánto se parece al de personaje local para así determinar si existe una
 mejora haciendo uso de las técnicas.
 Para poder realiazar esta comparación se necesita almacenar las posiciones
 que tienen los personajes a lo largo del tiempo.
 
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
Para obtener los datos se hace uso de un 
\shape italic
script
\shape default
 el cual se encarga de almacenar las posiciones de la entidad en cada equipo
 respectivamente para posteriormente procesar los datos conjuntamente.
 Este 
\shape italic
script
\shape default
 es de gran importancia ya que almacena toda la información de las distintas
 pruebas que conforma cada a evaluación y por ello se comenta.
 
\end_layout

\begin_layout Standard
El 
\shape italic
script
\shape default
, denominado SamplesManager, Alg.
\begin_inset CommandInset ref
LatexCommand ref
reference "alg:SamplesManager"

\end_inset

, define una estructura denominada 
\shape italic
Sample
\shape default
.
 Esta estructura representa una muestra, es decir el tiempo de captura y
 la posición en cada uno de los tres ejes.
 
\end_layout

\begin_layout Standard
Posteriormente define una lista con el objetivo de almacenar todas las muestras.
 Además para identificar si personaje local o remoto en el equipo se hace
 uso de la propiedad 
\shape italic
isMine
\shape default
 que indica si la 
\shape italic
NetworkView
\shape default
 es controlada por el personaje no.
 Y para diferenciar a un personaje de los que hay en la partida se usa el
 identificador de vista, 
\shape italic
NetworkViewID
\shape default
.
 Estas variables se inicializan en el método 
\shape italic
Start
\shape default
 el cual solamente se ejecuta al principio.
 
\end_layout

\begin_layout Standard
En el método 
\shape italic
Update
\shape default
, el cual se ejecuta una vez por cuadro, se van guardando las muestras durante
 un tiempo que se fija.
 Este tiempo se ha establecido a 30 segundos ya que es más que suficiente
 para obtener un elevado número de muestras.
 Una vez se agota el tiempo de muestreo se almacenan las muestras en un
 fichero de texto.
 
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
placement H
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
lstset{language=[Sharp]C,breaklines=true,basicstyle=
\backslash
footnotesize} 
\backslash
begin{lstlisting}[frame=single] 
\end_layout

\begin_layout Plain Layout

public class SamplesManager : MonoBehaviour {
\end_layout

\begin_layout Plain Layout

	private NetworkView nView; 	
\end_layout

\begin_layout Plain Layout

	private string isMine; 	
\end_layout

\begin_layout Plain Layout

	private string viewID;
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

	public bool ready = false; 	
\end_layout

\begin_layout Plain Layout

	public float totalTime = 30f;
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

	internal struct  Sample 	{
\end_layout

\begin_layout Plain Layout

		internal double time;//Tiempo de captura de la muestra
\end_layout

\begin_layout Plain Layout

		internal float posX; //Representa la posicion X
\end_layout

\begin_layout Plain Layout

		internal float posY; //Representa la posicion Y
\end_layout

\begin_layout Plain Layout

		internal float posZ; //Representa la posicion Z
\end_layout

\begin_layout Plain Layout

	}
\end_layout

\begin_layout Plain Layout

	List<Sample> samples;	//Lista para almacenar las muestras
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

	// Usada para inicialización	
\end_layout

\begin_layout Plain Layout

	void Start () {
\end_layout

\begin_layout Plain Layout

		samples = new List<Sample> ();
\end_layout

\begin_layout Plain Layout

		nView = GetComponent<NetworkView> ();
\end_layout

\begin_layout Plain Layout

		
\end_layout

\begin_layout Plain Layout

		viewID = nView.viewID.ToString ().Substring(13);
\end_layout

\begin_layout Plain Layout

		if (nView.isMine) { 
\end_layout

\begin_layout Plain Layout

			isMine = "MINE";
\end_layout

\begin_layout Plain Layout

		}else { 
\end_layout

\begin_layout Plain Layout

			isMine = "NO MINE";
\end_layout

\begin_layout Plain Layout

		}
\end_layout

\begin_layout Plain Layout

	}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

	// Update se llama una vez por frame 	
\end_layout

\begin_layout Plain Layout

	void Update () { 
\end_layout

\begin_layout Plain Layout

		if (ready) {
\end_layout

\begin_layout Plain Layout

			Sample sample;
\end_layout

\begin_layout Plain Layout

			sample.time = Network.time;
\end_layout

\begin_layout Plain Layout

			sample.posX = transform.position.x;
\end_layout

\begin_layout Plain Layout

			sample.posY = transform.position.y;
\end_layout

\begin_layout Plain Layout

			sample.posZ = transform.position.z;
\end_layout

\begin_layout Plain Layout

			samples.Add (sample);
\end_layout

\begin_layout Plain Layout

	
\end_layout

\begin_layout Plain Layout

			totalTime = totalTime - Time.deltaTime;
\end_layout

\begin_layout Plain Layout

			if (totalTime <= 0) {
\end_layout

\begin_layout Plain Layout

				Save (); //Guardar en fichero
\end_layout

\begin_layout Plain Layout

				ready = false;
\end_layout

\begin_layout Plain Layout

				samples.Clear ();// Vacia la lista.
\end_layout

\begin_layout Plain Layout

			}
\end_layout

\begin_layout Plain Layout

		}
\end_layout

\begin_layout Plain Layout

	}	
\end_layout

\begin_layout Plain Layout

}
\end_layout

\begin_layout Plain Layout


\backslash
end{lstlisting}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Fragmento del Script Samples Manager
\begin_inset CommandInset label
LatexCommand label
name "alg:SamplesManager"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Para que se entienda el funcionamiento se explica el ejemplo más simple.
 Suponiendo que solamente se tienen los dos ordenadores que se proponen
 se tendría en cada ordenador 2 personajes, siendo uno local y otro remoto.
 Para cada prueba se obtendría 1 archivo de muestras por personaje en cada
 equipo, es decir en este caso en total se tendría 4 archivos de muestras.
 Para simplificar se ha centrado la atención solamente en un personaje obteniend
o las muestra del local y de su réplica remota en el otro ordenador, es
 decir 2 archivos de muestras.
\end_layout

\begin_layout Section
Evaluación de la fluidez
\end_layout

\begin_layout Standard
En en esta primera evalucación se pretente comparar la fluidez que tiene
 el movimiento de los personajes remotos con respecto a los personajes locales.
 La fluidez indica que un movimiento tiene una trayectoría que no cambia
 bruscamente sino continuamente a lo largo del tiempo.
 En la Fig.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:FragMovPersonajeSA"

\end_inset

 se observa un framento del movimiento en el eje X que sigue un personaje
 en ambos ordenadores cuando no se aplica ningún algoritmo.
 En el eje X de la figura se muestra el tiempo en segundos y en el eje Y
 la posición en el eje X en metros.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
centering
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename ../figures/FragMovPersonajeSinAlgoritmo.eps
	width 75text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Movimiento del Personaje sin aplicar ninguna técnica
\begin_inset CommandInset label
LatexCommand label
name "fig:FragMovPersonajeSA"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
El movimiento del personaje local es decir el que mueve el jugador tiene
 un movimiento continuo y fluido.
 Por el contrario el personaje remoto no sigue este movimiento a la perfección.
 Cuando no se implementa ninguna técnica se actualiza las posición del personaje
 justo cuando llegan las actualizaciones, es decir los paquetes o mensajes.
 Esto provoca que el movimieno no sea continuo y presente escalones.
 Este tipo de movimieno escalonado es muy molesto para los jugadores ya
 que ellos quieren que los personajes se muevan fluidamente como los otros
 jugadores los están controlando.
 Para solucionarlo se hace uso de las técnicas que se han explicado, interpolaci
ón y predicción, de modo que se consigue suavizar el movimiento.
 
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
En la la Fig.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:FragMovPersonajeA0"

\end_inset

 se muestra en este caso el movimiento del personaje pero ahora haciendo
 uso de las técnicas, siendo la predicción en un paso de primer orden, 
\begin_inset CommandInset ref
LatexCommand ref
reference "par:OSFO"

\end_inset

.
 Al igual que en la anterior figura se representa el movimiento a lo largo
 del tiempo.
 En este caso al usar las técnicas de predición se ha conseguido eliminar
 los escalones que caracterizaba al movimiento del personaje remoto.
 Se obtiene un movimiento más suave mucho más similar el movimiento que
 tiene el personaje local.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
centering
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename ../figures/FragMovPersonajeAlgoritmoCero.eps
	width 75text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Movimiento del Personaje aplicando la Predicción en un Paso de Primer Orden
 (OSFO)
\begin_inset CommandInset label
LatexCommand label
name "fig:FragMovPersonajeA0"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
A continuación para medir la fluidez se han tomado datos del movimiento
 del personaje local y del remoto sin aplicar ninguna técnica y aplicando
 la predicción OSFO.
 La fluidez se medirá mediante la desviación típica continua.
 La desviación típica continua consiste en ir calculando la desviación por
 pequeños grupos de datos denominados ventana de un tamaño N.
 Al final se obtiene un vector que que contiene todas las desviaciones típicas
 de las ventanas.
 Y para obtener un único valor se aplica la media al vector.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
centering
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename ../figures/Desv.eps
	width 50text%

\end_inset


\begin_inset Graphics
	filename ../figures/DesvAmp.eps
	width 50text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Desviación típica de la me
\begin_inset CommandInset label
LatexCommand label
name "fig:FragMovPersonajeA0-1"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Un movimiento será más fluido que otro si su desviación continua es menor.
 En la Fig.
 X se muestra las desviaciones obtenidas para distintos valores de ventana,
 teniendo una apliación a la derecha.
 En el eje X se indica el tamaño de la venta y el Y muestra la desviación
 típica.
 La desviación típica aumenta conforme aumenta el tamaño de ventana debido
 a que cuanto más muestras el personaje tiene un movimiento más diverso.
 Lo importante no es en sí el valor de la desviación sino comparar unos
 con otros.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
El movimiento del personaje local y el del personaje remoto que aplica la
 técnica tienen una desviación menor que el movimiento del personaje remoto
 que no aplica ningún tipo de técnica.
 Por lo tanto las técnicas de predicción mejoran la fluidez del movimiento
 notablemente.
 
\end_layout

\begin_layout Section
Estudio respecto a la tasa de actualización
\end_layout

\begin_layout Standard
En este aparado se va a evaluar cómo afecta reducir la tasa de actualización
 a las técnicas de predicción.
 Esto es importante ya que reducir la tasa de actualización conlleva una
 bajada de la tasa de transferencia ya que se envian menos paquetes.
 
\end_layout

\begin_layout Standard
Para la evaluación se toman las tasas de la Tab.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Rates"

\end_inset

.
 Además debido a que el tiempo de interpolación depende de esta tasa de
 actualización, como se explicó en la sección 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:ProcesamientoPaquetes"

\end_inset

, también se indica su valor en cada caso.
 Este valor es muy importante modiciarlo adecuadamente.
\end_layout

\begin_layout Standard
\align center
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
centering
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="2" columns="5">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top" width="4cm">
<column alignment="center" valignment="top" width="1.5cm">
<column alignment="center" valignment="top" width="1.5cm">
<column alignment="center" valignment="top" width="1.5cm">
<column alignment="center" valignment="top" width="1.5cm">
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Tasa (actualiaciones/s)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
15
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
12
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
10
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
8
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Tiempo
\end_layout

\begin_layout Plain Layout

\series bold
Interpolación (s)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.135
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.17
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.25
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Caption Standard

\begin_layout Plain Layout
Tasas de actualización
\begin_inset CommandInset label
LatexCommand label
name "tab:Rates"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Para los distintos valores de tasa de actualización se ha obtenido el movimiento
 muestreado del personaje en cada equipo.
 El tiempo de muestreo ha sido 30 segundos durante los cuales se mueve al
 personaje por el mapa siguiendo el mismo camino.
 Una vez obtenido los datos se realiza su procesamiento para obtener resultados.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
El análisis de las muestras se va a realizar por medio de dos métricas.
 En la primera de ellas se medirá el error de posición del personaje en
 los dos equipos, es decir tienen la misma posición o existe alguna diferencia.
 Como segunda métrica de análisiss se utilizará la correlación para ver
 la similitud que tienen ambos movimientos.
\end_layout

\begin_layout Subsection
Distancia
\begin_inset CommandInset label
LatexCommand label
name "sub:Distancia-Rates"

\end_inset


\end_layout

\begin_layout Standard
En este apartado se va a evaluar el error de posición.
 El error de posición se define como la distancia euclídea entre el personaje
 local, el mueve el usuario, y el personaje remoto.
 Al ser un juego en 3D el cálculo de las distancia implica las tres coordenas.
 Para el cálculo de la distancia euclídea se utiliza la fórmula 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:DistanciaEuclidea"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
d\;=\;\sqrt{(x-x')^{2}+(y-y')^{2}+(z-z')^{2}}\label{eq:DistanciaEuclidea}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
El error de posición se ha calculado con cada tasa para cada uno de los
 casos, es decir sin aplicar ninguna técnica y con cada una de las cuatro
 técnicas explicadas en la sección 
\begin_inset CommandInset ref
LatexCommand ref
reference "par:Técnicas-de-Predicción"

\end_inset

.
 Representando los errores de posición se obtuvo la Fig.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Error-Posicion-Rates"

\end_inset

.
 Las figuras presentan en el eje X la tasa de actualización, es decir número
 de actualiazacions por segundo y en el eje Y la distancia en metros.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
centering
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename ../figures/Error-Posicion-Rates.eps
	width 50text%

\end_inset


\begin_inset Graphics
	filename ../figures/Error-Posicion-Rates2.eps
	width 50text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Error de posición entre el Personaje Local y Remoto en función de la tasa
 de actualización
\begin_inset CommandInset label
LatexCommand label
name "fig:Error-Posicion-Rates"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Si observamos primeramente la figura de la izquierda se observa cómo sin
 hacer uso de algoritmo el error de posición tiene una media más elevada
 con respecto si se hace uso de la primera técnica de predicción.
 A parte las desviaciones son bastante elevadas ya que hay mucha diferencia
 en el error de posición entre los dos casos extremos.
 El caso más favorable es justo cuando ha llegado una actualización donde
 el error será el mínimo y el peor será justo antes de que llegue una nueva
 actualización.
 
\end_layout

\begin_layout Standard
Si se presta atención a la línea que representa el error de posición sin
 algoritmo se observa que conforme se aumenta la tasa de actualización el
 error de posición se reduce.
 Esto es muy facil de explicar ya que si se aumenta la tasa de actualización
 el tiempo entre actualizaciones es menor consiguiendo una mayor precisión.
 En cambio haciendo uso de las técnicas, es decir aplicando los algoritmos
 se consigue que esta diferencia se reduzca muchísimo siendo prácticamente
 despreciable.
 En principio, ya que la distancia haciendo uso de las técnicas apenas varía
 se podría reducir la tasa bastante para que el juego tuviera una tasa de
 transferencia menor además de la reducción de gasto computacional que conlleva.
 Pero esta idea presenta un problema.
 Al reducir la tasa de actualización se necesita aumentar el tiempo de interpola
ción.
 Debido a que el tiempo de interpolación introduce un retraso en el movimiento
 de las entidades remotas es neseario establecer un compromiso entre bajar
 la tasa de actualización y el retraso que se introduce.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
Realiazando una comparación entre las distincas técnicas de predicción en
 términos de error de posción no existe ninguna variación apreciable pero
 si en otros aspectos que no quedan reflejados en las figuras.
 Las técnicas de primer orden presentan un mejor comportamiento debido a
 que el juego es muy dinámico presentando cambios bruscos y por ello es
 mejor solamente usar la última actualización para realizar la predicción.
 En cambio las técnicas de segundo orden, ya que usan los dos últimos paquetes
 sucesivos para realizar la predicción introducen algún pequeño comportamiento
 errático cuando el personaje realiza pequeños movimientos con cambios de
 dirección bruscos.
 Este comportamiento indeseado es mayor cuanto menor es la tasa de actualización
 debido a que el tiempo entre actualizaciones se eleva y con ello las diferencia
s entre la información que estas contienen.
 Si el movimiento de los personajes en continuado todas las técnicas presentan
 el mismo comportamiento sobretodo visualmente para los jugadores.
 
\end_layout

\begin_layout Subsection
Correlación
\begin_inset CommandInset label
LatexCommand label
name "sub:Correlación-Rates"

\end_inset


\end_layout

\begin_layout Standard
Para complementar el análisis anterior se hará uso de la correlación para
 medir la similud de los movimientos.
 Los movimientos que los personajes describen pueden ser considerados señales
 las cuales se han muestreado haciendo uso del 
\shape italic
script
\shape default
 
\shape italic
SamplesManager
\shape default
 para obtener señales discretas.
 Frecuentemente en el procesado digital de señales se necesita cuantificar
 el grado de interdependencia entre dos procesos o la similitud entre dos
 señales X1[n] y X2[n].
 En otras palabras determinar la correlación existente entre dos procesos
 o señales.
 La expresión conocida como correlación cruzada queda citada en la ecuación
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:Correlacion"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
c_{12}[k]=\frac{1}{N}\,*\sum_{n=0}^{N-1}x_{1}[n]*x_{2}[n+k]\label{eq:Correlacion}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
Los valores de la correlación cruzada calculados a partir de la expresión
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:Correlacion"

\end_inset

 dependen del valor absoluto de los valores de la secuencia.
 Desde un punto de vista práctico es interesante cuantificar entre los valores
 -1 y +1, por ejemplo +1 significa un 100% de correlación mientras que -1
 significa que las dos señales están en oposición de fase.
 Esta forma de especificar la correlación puede implementarse normalizando
 los valores por una cantidad dependiente de la energía asociada al dato.
 La versión normalizada de la correlación cruzada es:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
\rho_{12}[k]=\frac{c_{12}[k]}{\frac{1}{N}\left[\sum_{n=0}^{N-1}(x_{1}[n])^{2}*\sum_{n=0}^{N-1}(x_{2}[n])^{2}\right]^{\frac{1}{2}}}\label{eq:CoefCorrelacion}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
Esta versión normalizada se conoce como coeficiente de la correlación cruzada.
 Su valor está comprendido entre +1 y -1.
 El valor +1 significa un 100% de correlación, mientras que -1 significa
 un 100% de correlación en oposición de fase.
 Un valor cero significa que no existe correlación y por lo tanto las dos
 señales son completamente independientes.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
Para calcular el coeficiente de correlación se utilizan los mismo datos
 que se han utilizado en el apartado anterior para calcular el error de
 posición.
 El cálculo siempre se realiza tomando el movimiento del personaje local
 con movimiento del personaje remoto.
 Al calcular el coeficiente se obtiene un valor que cuanto más cercano se
 obtenga de 1 quiere decir que el movimiento que realiza los personajes
 remotos se aproximan más al movimiento continuo del personaje que mueve
 el usuario.
 Debido a que las diferencias son mínimas ya que los movimientos remotos
 solamente varián en los escalones en caso de no hacer uso de técnicas o
 en pequeñas oscilaciones entorno al movimiento del personaje local los
 coeficientes están todos muy próximos a 1.
 Por ello se ha preferido representar la diferencia de los coeficientes
 con respecto a 1 que indicaría que los movimientos son iguales.
 En la Fig.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Correlacion-Rates"

\end_inset

 queda representado esta diferencia para los movimientos en el eje X y Z
 con las diferentes técnicas.
 El eje Y se ha obviado ya que se trata del eje en el cual los jugadores
 se mueven cuando saltan siendo algo puntual.
 En el eje X de las figuras se representa la tasa de actualización y el
 eje Y se representa la diferencia de la correlación con respecto a 1.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
centering
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename ../figures/Correlacion-Rates-X.eps
	width 50text%

\end_inset


\begin_inset Graphics
	filename ../figures/Correlacion-Rates-Z.eps
	width 50text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Diferencias del coeficiente de correlación con respecto a 1 en función de
 la tasa de actualización
\begin_inset CommandInset label
LatexCommand label
name "fig:Correlacion-Rates"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Como se puede observar haciendo uso de los algoritmos se consigue que la
 diferencia se acerque más a 0, es decir se obtienen coeficientes más cercanos
 a 1.
 Nuevamente se observa que aumentar la tasa de actualizaciones conlleva
 una mayor similitud entre los movimientos.
 Además en este caso tampoco se puede sacar ninguna diferencia concluyente
 entre las diferentes técnicas a partir de las figuras.
 
\end_layout

\begin_layout Section
Estudio respecto a las pérdidas
\end_layout

\begin_layout Standard
En este aparado se va a evaluar como afecta la introducción de pérdidas
 a las técnicas de predicción.
 En este caso se fija la tasa de actualización a 15 por segundo (valor por
 defecto en 
\shape italic
Unity3D
\shape default
) y se introduce una probabilidad de pérdidas entre los equipos con el objetivo
 de analizar si las técnicas ayudan a mantener el movimiento.
 Para introducir pérdidas se ha utilizado el programa denominado 
\shape italic
Network Link Conditioner
\shape default
 comentado en al inicio del capítulo, 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Descripción-del-entorno-experimental"

\end_inset

.
 El programa permite establecer el porcentaje de pérdidas de la interfaz
 de red comodamente además del retardo y el ancho de banda que no se modificarán.
 En la Tab.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Perdidas"

\end_inset

 se muestran los porcentajes que se han utilizado para realizar las pruebas.
 
\end_layout

\begin_layout Standard
\align center
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
centering
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="1" columns="6">
<features rotate="0" tabularvalignment="middle">
<column alignment="center" valignment="top" width="4cm">
<column alignment="center" valignment="top" width="1.5cm">
<column alignment="center" valignment="top" width="1.5cm">
<column alignment="center" valignment="top" width="1.5cm">
<column alignment="center" valignment="top" width="1.5cm">
<column alignment="center" valignment="top" width="1.5cm">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
% de Pérdidas
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0,001
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0,01
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
10
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Caption Standard

\begin_layout Plain Layout
Porcentajes de Pérdidas
\begin_inset CommandInset label
LatexCommand label
name "tab:Perdidas"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Al igual que en el estudio anterior se utilizarán las mismas métricas para
 realizar la evaluación.
 La primera será calcular la distancia existente entre personaje en el portatil
 y el ordenador de sobremesa.
 Posteriormente se calculará la correlación para obtener el grado de similitud
 entre los movimientos.
 
\end_layout

\begin_layout Subsection
Distancia
\end_layout

\begin_layout Standard
Al igual que en el anterior caso se analiza el error de posición entre el
 personaje local y el personaje remoto en el otro equipo.
 En este caso el error se calcula de los nuevos datos obtenidos de las pruebas
 donde se ha ido variando la técnica de predicción y la probabilidad de
 pérdidas.
 Representando el error de posición se obtiene la Fig.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Distancia-Perdidas"

\end_inset

.
 En la figura el eje X respresenta la probabilidad de pérdidas y el eje
 Y el error de posición o distancia en metros.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
centering
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename ../figures/Error-Posicion-Perdidas.eps
	width 50text%

\end_inset


\begin_inset Graphics
	filename ../figures/Error-Posicion-Perdidas2.eps
	width 50text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Error de posición entre el Personaje Local y Remoto en función de probabilidad
 de pérdidas
\begin_inset CommandInset label
LatexCommand label
name "fig:Distancia-Perdidas"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Según la figura al aplicar los algoritmos se tiene una mejora muy considerable.
 Esto se debe a que eliminan el escalonado del movimiento de los personajes
 remoto.
 Con respecto a las pérdidas consigue reducir los escalones que se producen
 hasta cierto punto.
 Por ello estas técnicas no tienen como principal objetivo hacer frente
 a las pérdidas sino más bien suavizarlas un poco.
 Además es muy complicado tener probabilidades de pérdidas por encima aproximada
mente del 5%.
 Por encima de este valor aunque observando la figura los datos muestran
 una mejora las identidades remotas presentan movimientos erráticos, como
 paradas durante un tiempo o movimientos brusco, debido precisamente a la
 elevada probabilidad de pérdidas.
 
\end_layout

\begin_layout Standard
Respecto a las desviaciones son elevadas con respecto a la media por el
 mismo motivo que se comento en la seccion anterior donde se modica la tasa
 de actualización.
 
\end_layout

\begin_layout Subsection
Correlación
\end_layout

\begin_layout Standard
Para terminar se calculará el coeficiente de correlación a partir de los
 mismos datos que se ha calculado el error de posición.
 En la Fig.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Correlacion-Perdidas"

\end_inset

 se tiene lo mismo que se hizo en la sección 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Correlación-Rates"

\end_inset

 pero en este caso en función de la probabilidad de pérdidas en vez de la
 tasa de actualización.
 En los ejes X se representa la probabilidad de pérdidas y en los ejes Y
 la diferencia del coeficiente con respecto a 1.
 Los algoritmos muestran un coeficiente de correlación más cercano a 1 ya
 que como se ha comentado antes consiguen reducir el movimiento escalonado
 y además suavizar el efecto de las pérdidas.
 Por ello se reafirma la conclusión que se obtiene con la anterior métrica,
 el error de posición.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
centering
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename ../figures/Correlacion-Perdidas-X.eps
	width 50text%

\end_inset


\begin_inset Graphics
	filename ../figures/Correlacion-Perdidas-Z.eps
	width 50text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Diferencias del coeficiente de correlación con respecto a 1 en función de
 la tasa de actualización
\begin_inset CommandInset label
LatexCommand label
name "fig:Correlacion-Perdidas"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Conclusión
\end_layout

\begin_layout Standard
Primeramente la evaluación ha conseguido demostrar por una parte que las
 técnicas de predicción consiguen suavizar, es decir aumentar la fluidez
 de los movimientos.
 Gracias a ello se consigue se consigue evitar que las entidades o personajes
 se queden inmóviles entre mensajes de actualización ofreciendo un movimiento
 más continuo y agradable visualmente.
 
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
Por otra parte mediante la reducción de la frecuencia de envió de los mensajes
 de actualización se ha comprobado que las técnicas de predicción tienen
 un gran potencial para reducir la tasa de transmisión necesaria.
 Esto es gracias a que las técnicas son capaces de entre actualizaciones
 consecutivas predecir el movimiento durante un intervalo de tiempo que
 se indica de modo que las entidades siguen el movimiento hasta la siguiente
 actualiación donde corregirán la posición.
 Como se comentó en la sección 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Distancia-Rates"

\end_inset

, la reducción de frecuencia de actualización conlleva un retraso intrínseco
 en el movimiento de las entidades por lo tanto es necesario primeramente
 analizar si compesa reducir la tasa de actualización frente a ganar interactivi
dad.
 Esto dependerá del género y tipo de juego que se vaya a desarrollar pero
 para el caso de los FPS que necesitan una alta interactividad y precisión
 no se puede reducir drásticamente la tasa de mensajes de actualización.
 
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
En cuanto a pérdidas, las técnicas de predicción consiguen minimizar su
 efecto de modo que ante pérdidas puntuales o pequeñas ráfagas de pérdidas
 la entidad sigue el movimiendo correcto con alguna desviación.
 En caso de ráfagas de mayor tamaño se miniza el efecto que provocan moviendo
 a la entidad un tiempo pero posteriormente la entidades se pará o tiene
 un movimiento incorrecto.
 
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
La idea básica de las técnicas de predicción es reemplazar la comunicación
 con el cálculo computacional.
 Si se reduce o empeora el tráfico de la red, es a costa de la capacidad
 de procesamiento.
 Exactamente en las técnicas de predicción se calculan posiciones futuras
 y se corrigen.
\end_layout

\end_body
\end_document
